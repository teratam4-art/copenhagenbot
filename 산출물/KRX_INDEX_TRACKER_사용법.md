# 📊 KRX 코스피200 편입/제외 추적 및 스크리닝 시스템

## 🎯 개요

이 시스템은 KRX 코스피200의 편입/제외 종목을 추적하고, 뉴스 분석과 기술적 신호를 결합하여 매수 타이밍을 추천합니다.

### 주요 기능

1. **KRX 편입/제외 데이터 크롤링**
   - KRX 공시 페이지에서 코스피200 구성종목 변경 정보 수집
   - 네이버 증권에서 간접 정보 수집
   - 뉴스 기사에서 편입/제외 정보 추출

2. **뉴스 기반 보조 분석**
   - 네이버 경제뉴스에서 코스피200 편입/제외 관련 기사 크롤링
   - 기사에서 종목명과 업종 추출
   - 업종별 편입/제외 현황 집계

3. **통합 스크리닝**
   - 신규 편입 종목의 기술적 신호 분석
   - RSI, MA5-MA20, 거래량 배수, 골든크로스 확인
   - 점수 기반 TOP5 추천

## 📋 설치

```bash
pip install pandas beautifulsoup4 requests
```

## 🚀 사용법

### 1. 편입/제외 현황 조회

```bash
# 코스피200 편입/제외 현황
python3 krx_index_tracker.py --changes

# 최근 60일간 조회
python3 krx_index_tracker.py --changes --days 60
```

**출력 예시:**
```
📅 2025-10-29
   편입: 000660, 005930, 035720
   편입 업종:
     - 반도체: 000660, 005930, 035720
   제외: 012330, 003670
   제외 업종:
     - 자동차: 012330
     - 화학: 003670
```

### 2. 뉴스 기반 보조 분석

```bash
# 최근 7일간 뉴스 분석
python3 krx_index_tracker.py --news --days 7
```

**출력 예시:**
```
📊 업종별 편입/제외 현황:
   반도체: 편입 3건 / 제외 1건
   자동차: 편입 1건 / 제외 2건
```

### 3. 신규 편입 종목 스크리닝 (추천)

```bash
# 신규 편입 종목 중 기술적 신호가 좋은 TOP5 추천
python3 krx_index_tracker.py --screen --top 5

# TOP10 추천
python3 krx_index_tracker.py --screen --top 10
```

**출력 예시:**
```
🎯 신규 편입 종목 TOP 5 (기술적 신호 기반)
티커         업종         RSI      MA격차       거래량배수        매수판단                          
--------------------------------------------------------------------------------
035720     반도체        54.9         5.98%       0.56배 ✅ 진입 가능 (MA5 아래)              
000660     반도체        73.8        18.82%       1.33배 🚫 진입 비추천 (MA5 위)              
005930     반도체        65.6         7.56%       1.12배 ✅ 진입 가능 (MA5 아래)              
```

### 4. 전체 분석 (편입/제외 + 뉴스 + 스크리닝)

```bash
# 모든 기능을 한 번에 실행
python3 krx_index_tracker.py --all

# 또는 옵션 없이 실행해도 전체 분석
python3 krx_index_tracker.py
```

## 📊 출력 형식 설명

### 스크리닝 결과 컬럼

- **티커**: 종목코드 (6자리)
- **업종**: 업종명 (반도체, 자동차, 화학 등)
- **RSI**: 상대강도지수 (0-100)
- **MA격차**: MA5와 MA20의 차이 (%)
- **거래량배수**: 평균 거래량 대비 현재 거래량 배수
- **매수판단**: ✅ 진입 가능 / 👀 관망 / 🚫 진입 비추천

### 점수 계산 기준

- **진입 가능 신호**: 50점
- **RSI 적정 범위 (45-60)**: 20점
- **MA5 > MA20 (골든크로스)**: 15점
- **거래량 적정 범위 (1.2-2.5배)**: 15점

**총점 100점 만점**

## 🔧 고급 옵션

### 다른 지수 추적

```bash
# 코스닥150 추적
python3 krx_index_tracker.py --index 코스닥150 --screen

# 코스피 추적
python3 krx_index_tracker.py --index 코스피 --screen
```

### 조회 기간 조정

```bash
# 최근 60일간 데이터 조회
python3 krx_index_tracker.py --changes --days 60

# 최근 7일간 뉴스만
python3 krx_index_tracker.py --news --days 7
```

## 📝 데이터 소스

현재 시스템은 다음 순서로 데이터를 수집합니다:

1. **네이버 증권** (1순위)
   - 코스피200 페이지에서 정보 수집
   - 뉴스 검색 결과에서 편입/제외 정보 추출

2. **KRX 공시 페이지** (2순위)
   - KIND 공시 시스템에서 공시 정보 검색
   - 실제 HTML 구조에 맞게 수정 필요

3. **뉴스 기사** (3순위)
   - 네이버 뉴스 검색 결과에서 정보 추출
   - 기사 본문에서 종목코드 자동 추출

4. **샘플 데이터** (백업)
   - 실제 데이터를 찾을 수 없을 때 테스트용

## ⚠️ 주의사항

1. **KRX API 연동 필요**
   - 현재는 네이버 증권과 뉴스에서 간접 정보 수집
   - 정확한 공식 데이터는 KRX 정보데이터시스템 API 사용 필요
   - API 키 발급: https://data.krx.co.kr/

2. **뉴스 크롤링 제한**
   - 네이버 뉴스 구조 변경 시 크롤링 실패 가능
   - 기사 본문 크롤링은 일부만 지원

3. **업종 매핑**
   - 현재는 수동 매핑 딕셔너리 사용
   - 실제로는 KRX 업종 분류 API나 네이버 증권에서 가져와야 함

## 💡 향후 개선 사항

1. **KRX 공식 API 연동**
   - KRX 정보데이터시스템 API 키 발급 및 연동
   - 코스피200 구성종목 변경 이력 정확한 조회

2. **업종 자동 매핑**
   - KRX 업종 분류 API 활용
   - 네이버 증권에서 업종 정보 자동 수집

3. **더 많은 지수 지원**
   - 코스닥150, 코스피50, KRX100 등
   - 각 지수별 편입/제외 추적

4. **실시간 알림**
   - 신규 편입 종목 발견 시 알림
   - 기술적 신호가 좋은 편입 종목 자동 알림

## 📚 관련 파일

- `krx_index_tracker.py`: 메인 스크립트
- `stock_screener.py`: 기술적 신호 분석 (연동)
- `news_theme_screener.py`: 뉴스 기반 테마 스크리닝 (선택적 연동)

## 🔍 사용 예시

### 예시 1: 매일 신규 편입 종목 확인

```bash
# 매일 아침 실행하여 신규 편입 종목 스크리닝
python3 krx_index_tracker.py --screen --top 5
```

### 예시 2: 주간 편입/제외 리포트

```bash
# 지난 7일간 편입/제외 현황 + 뉴스 분석
python3 krx_index_tracker.py --changes --news --days 7
```

### 예시 3: 전체 분석 후 상세 리포트

```bash
# 전체 분석 실행
python3 krx_index_tracker.py --all --top 10 > kospi200_report.txt
```

## 🎯 활용 팁

1. **ETF 수급 효과**
   - 코스피200 편입 종목은 관련 ETF의 자동 매수 수요 발생
   - 편입 직후 단기 상승 가능성 높음

2. **기술적 신호와 결합**
   - 편입 종목 중 기술적 신호가 좋은 종목만 선별
   - RSI, 거래량, 골든크로스 모두 확인

3. **업종별 분석**
   - 특정 업종이 많이 편입되면 업종 테마 주의
   - 제외가 많은 업종은 하락 가능성

4. **뉴스 확인**
   - 편입/제외 이유를 뉴스에서 확인
   - 시장 반응 예측에 도움

